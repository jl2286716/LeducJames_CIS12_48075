<!--NOTE: re-encode as PHP and embed PHP into onclick event in button to solve problem -->
<!-- BETTER NOTE: remove the button; instead, alert box out each turn within their turns prompting (within alert box, not prompt box) for the user to press 'Okay' button on alert box as the attack button -->
<!doctype html>
<html lang="en">
	<head>
		<title>Zompocalypse</title>
		<meta charset="utf-8">
		<!--link rel="stylesheet" href="styles/styles.css"-->	<!-- Include Style Sheets -->
		<script src=""></script>
		<script>
			//	Sets:
			function setPlayer(playerName){
				var p = new Object();
					p = {
					name:playerName,
					health:200,
					maxH:200,
					def:10,
					spd:50,
					pwr:20,
					acc:50,
					crit:0,
					mm357:0,
					mm39:0,
					mm9:0,
					shell:0,
					quiv:0,
					arr:0
					};
				return p;
			}
			function setFoe(n,h,d,s,p){
				var f = new Object();
					f = {
						name:n,
						health:h,
						def:d,
						spd:s,
						pwr:p
					};
				return f;
			}
			function setGear(n,t,w,h,mh,d,s,p,a,c,m357,m39,m9,sh,q,ar){
				var g = new Object();
					g = {
					name:n,
					type:t,
					wear:w,
					health:h,
					maxH:mh,
					def:d,
					spd:s,
					pwr:p,
					acc:a,
					crit:c,
					mm357:m357,
					mm39:m39,
					mm9:m9,
					shell:sh,
					quiv:q,
					arr:ar
					};
				return g;
			}
			function setEquip(hd,ch,bk,hn,ft,he){
				var e = new Object();
					e = {
					head:hd,
					chest:ch,
					back:bk,
					hands:hn,
					feet:ft,
					held:he
				};
				return e;
			}
			
			//	Displays:
			function displayStats(player){
				var str = "";
				str+=("Name: <b>"+player.name+"</b><br>");
				str+=("Current Health: <b>"+player.health+"</b><br>");
				str+=("Max Health: <b>"+player.maxH+"</b><br>");
				str+=("Defense: <b>"+player.def+"</b><br>");
				str+=("Speed: <b>"+player.spd+"</b><br>");
				str+=("Power: <b>"+player.pwr+"</b><br>");
				str+=("Accuracy: <b>"+player.acc+"%</b><br>");
				str+=("Critical Chance: <b>"+player.crit+"%</b><br>");
				str+=("357mm Rounds: <b>"+player.mm357+"</b><br>");
				str+=("39mm Rounds: <b>"+player.mm39+"</b><br>");
				str+=("9mm Rounds: <b>"+player.mm9+"</b><br>");
				str+=("Shotgun Shells: <b>"+player.shell+"</b><br>");
				str+=("Quiver Capacity: <b>"+player.quiv+"</b><br>");
				str+=("Arrows: <b>"+player.arr+"</b><br>");
				document.getElementById("stats").innerHTML = str;
			}
			function displayEquip(equip){
				var str = "";
				str+=("Head: <b>"+equip.head+"</b><br>");
				str+=("Chest: <b>"+equip.chest+"</b><br>");
				str+=("Back: <b>"+equip.back+"</b><br>");
				str+=("Hands: <b>"+equip.hands+"</b><br>");
				str+=("Feet: <b>"+equip.feet+"</b><br>");
				str+=("Held Item: <b>"+equip.held+"</b><br>");
				document.getElementById("equip").innerHTML = str;
			}
			function displayFoe(foe){	//	might need to change foe display and attack button
				var str = "";
					str+=("Name: <b>"+foe.name+"</b><br>");
					str+=("Health: <b>"+foe.health+"</b><br>");
					str+=("Defense: <b>"+foe.def+"</b><br>");
					str+=("Speed: <b>"+foe.spd+"</b><br>");
					str+=("Power: <b>"+foe.pwr+"</b><br>");
				document.getElementById("foeN").innerHTML = (foe.name+"'s Stats");
				document.getElementById("foe").innerHTML = str;
			}
			
			//	Updates:
			function updatePlayer(player,found,current){
				player = {
					name:player.name,
					health:player.health - current.health + found.health,
					maxH:player.maxH - current.maxH + found.maxH,
					def:player.def - current.def + found.def,
					spd:player.spd - current.spd + found.spd,
					pwr:player.pwr - current.pwr + found.pwr,
					acc:player.acc - current.acc + found.acc,
					crit:player.crit - current.crit + found.crit,
					mm357:player.mm357 - current.mm357 + found.mm357,
					mm39:player.mm39 - current.mm39 + found.mm39,
					mm9:player.mm9 - current.mm9 + found.mm9,
					shell:player.shell - current.shell + found.shell,
					quiv:player.quiv - current.quiv + found.quiv,
					arr:player.arr - current.arr + found.arr
				};
				return player;
			}
			function clearFoe(){
				document.getElementById("foeN").innerHTML = "";
				document.getElementById("foe").innerHTML = "";
			}
			
			//	Attacking:
			function attack(p,f,e){
				var	pA = p.pwr-f.def;	//	set player attack strength
				var fA = f.pwr-p.def;	//	set foe attack strength
				var turn = 1;			//	set turn counter
				
				//	compare speeds; calculate accuracy; consider ammo; attack; update player and foe; check healths; prompt after each turn; 
				do{
					if((f.spd)%turn) == 0){	//	Player Attacks
						if((p.acc)<=(Math.floor((Math.floor()*100)+1))){	//	Calculate Accuracy
							//	Check Ammo
							f.health-=pA;
						}
					}
					if((p.spd)%turn) == 0){	//	Foe Attacks
						if(fA<2){
							p.health--;
						}else{
							p.health-=fA;
						}
					}
					turn++;
					if((f.health)<=0){
						alert("The "+f.name+" is dead!");
						clearFoe();
						break;
					}
					if((p.health)<=0){	//	End Game
						alert(p.name+", you are dead!");
						exit();
					}
				}while((p.health)>0 && (f.health)>0);
				
				return p;
			}
		</script>
	</head>
	<body background="city.jpg">
		<center><h1 id="header">Introduction</h1></center>
		<script>
			//	Create the player and set default stats:
			var pName = prompt("What's your name?");
			var player = setPlayer(pName);
			
			//	Output stat table:
			//	Display table headers:
			document.write("<center><table width='500' border=1><tr><td><h2>"+pName+"'s Stats</h2></td><td><h2 id='foeN'></h2></td><td><h2>Equipment</h2></td></tr>");
			//	Display table content holders:
			document.write("<tr><td id='stats'></td><td id='foe'></td><td id='equip' style='vertical-align:text-top'></td></tr></table></center>");
		
			//	Set default player equipment
			alert("Welcome to the end of the world, "+pName+"!");
			var equip = setEquip("Bare","Bare","Bare","Bare","Bare","Empty");
			
			//	Display stats and equipment:
			displayStats(player);
			displayEquip(equip);

			//	Create & initialize gear variables (previous, current, found):
			//	Head objects:
			var pHead = setGear("None","None","None",0,0,0,0,0,0,0,0,0,0,0,0,0);
			var cHead = setGear("None","None","None",0,0,0,0,0,0,0,0,0,0,0,0,0);
			var fHead = setGear("None","None","None",0,0,0,0,0,0,0,0,0,0,0,0,0);
			//	Chest objects:
			var pChest = setGear("None","None","None",0,0,0,0,0,0,0,0,0,0,0,0,0);
			var cChest = setGear("None","None","None",0,0,0,0,0,0,0,0,0,0,0,0,0);
			var fChest = setGear("None","None","None",0,0,0,0,0,0,0,0,0,0,0,0,0);
			//	Back objects:
			var pBack = setGear("None","None","None",0,0,0,0,0,0,0,0,0,0,0,0,0);
			var cBack = setGear("None","None","None",0,0,0,0,0,0,0,0,0,0,0,0,0);
			var fBack = setGear("None","None","None",0,0,0,0,0,0,0,0,0,0,0,0,0);
			//	Hands objects
			var pHands = setGear("None","None","None",0,0,0,0,0,0,0,0,0,0,0,0,0);
			var cHands = setGear("None","None","None",0,0,0,0,0,0,0,0,0,0,0,0,0);
			var fHands = setGear("None","None","None",0,0,0,0,0,0,0,0,0,0,0,0,0);
			//	Feet objects
			var pFeet = setGear("None","None","None",0,0,0,0,0,0,0,0,0,0,0,0,0);
			var cFeet = setGear("None","None","None",0,0,0,0,0,0,0,0,0,0,0,0,0);
			var fFeet = setGear("None","None","None",0,0,0,0,0,0,0,0,0,0,0,0,0);
			//	Held objects
			var pHeld = setGear("None","None","None",0,0,0,0,0,0,0,0,0,0,0,0,0);
			var cHeld = setGear("None","None","None",0,0,0,0,0,0,0,0,0,0,0,0,0);
			var fHeld = setGear("None","None","None",0,0,0,0,0,0,0,0,0,0,0,0,0);
			
			//	Create and initialize other variables:
			var foe = new Object;
			
			//	Output Intro story:
			alert("For the past few days, there have been news reports of a new global viral pandemic sweeping across the nation...");
			alert("The time is 9:42 PM on a Sunday night: \nYou are at home in bed watching your favorite TV show when it is interrupted by a breaking news bulletin...");
			alert('Reporter: \n"Chaos has erupted in Los Angeles and the surrounding counties! We now go live to our correspondent on the scene!"');
			alert('Correspondent: \n"-shrk-...pandemonium...-shrk-...are attacking other people...-shrk-...dead...-shrk-...rising and...-shrk-AAAAAHHH!!!-shrk-schhh-"');
			alert('Reporter: \n"Oh! Oh my God! Wha... Was that blood that just spla... What?! This just in! The president is issuing a statement. We now go live to the White House."');
			alert('President: \n"...remain indoors!-shrk-...of rations and board up all...-shrk-schhh-"');
			alert('Reporter: \n"We seem to have lost the feed and...-yelling in the background-...OH MY GOD!!!-shrk-schhh-"');
			alert("The television turns to static. You turn to the other channels for further info.../nNothing but static.");
			alert("You pick up your cellphone to check on your family and friends.../nNo service.");
			
			//	Level 1 begins...
			document.getElementById("header").innerHTML = "Level 1: Get Out of There!";

			alert("You put on a shirt and throw on your slippers and walk into the living room when you hear an explosion in the distance. The windows shake and the power goes out.");
			
			//	Equip shirt (chest) & update stats:
			fChest = setGear("Shirt","Armor","Chest",5,5,1,0,0,0,0,0,0,0,0,0,0);
			player = updatePlayer(player,fChest,cChest);
			pChest = cChest;
			cChest = fChest;
			equip = setEquip(equip.head,cChest.name,equip.back,equip.hands,equip.feet,equip.held);
						
			//	Equip slippers (feet) & update stats:
			fFeet = setGear("Slippers","Armor","Feet",5,5,1,-5,0,0,0,0,0,0,0,0,0);
			player = updatePlayer(player,fFeet,cFeet);
			pFeet = cFeet;
			cFeet = fFeet;
			equip = setEquip(equip.head,equip.chest,equip.back,equip.hands,cFeet.name,equip.held);
			
			//	Display updated stats:
			displayStats(player);
			displayEquip(equip);
			
			alert("You hear faint screams accompanied by the neighborhood dogs barking frantically. The screams grow nearer!");
			
			do{	//	choose: i || p
				var choice = prompt("Investigate (i) or prepare (p)?\nEnter one letter only!");
			}while(choice!='i' || choice!='p');
			
			if(choice=='i'){	//	Investigate (i)
				alert("You look out the window and see a woman running up the street being chased by two ghoulish-looking men.");
				
				do{	//	choose: w || h
					choice = prompt("Keep watching (w) or help (h) her?");
				}while(choice!='w' || choice!='h');
				
				if(choice=='w'){	//	Watch (w)
					alert("A truck swerves into the ghoulish men, flips and wrecks into the woman before it exlopdes!");
					
					do{	//	choose e || c - search livingroom
						choice = prompt('"WOW!" You decide to search for supplies: \nCheck the entertainment center (e) or the couch (c)?');
					}while(choice!='e' || choice!='c');
					
					//	set the reaction
					if(choice=='e'){	//	Search the Entertainment Center (e)
						alert("You search the entertainment center...\nYou find the Mag-Lite!");
						
						//	Equip Mag-Lite (held) & update stats:
						fHeld = setGear("Mag-Lite","Item","Held",0,0,0,9,5,10,5,0,0,0,0,0,0);
						player = updatePlayer(player,fHeld,cHeld);
						pHeld = cHeld;
						cHeld = fHeld;
						equip = setEquip(equip.head,equip.chest,equip.back,equip.hands,equip.feet,cHeld.name);
						
					}else if(choice!=='c'){	//	Search the Couch (c)
						alert("You search the couch...\nYou find the Defender 1300!");
						
						//	Equip Defender 1300 (hands) & update stats:
						fHands = setGear("Defender 1300","Weapon","Hands",0,0,1,5,35,50,80,0,0,0,5,0,0);
						player = updatePlayer(player,fHands,cHands);
						pHands = cHands;
						cHands = fHands;
						equip = setEquip(equip.head,equip.chest,equip.back,cHands.name,equip.feet,equip.held);
					}
					
					//	check this part out
					
				}else if(choice=='h'){	//	Help (h)
					alert('You grab run out to help the woman, shouting, "Leave her alone!"');
					alert("Both ghoulish men turn and head towards you when a truck wrecks into one of them and the woman, flips, and explodes!");
					
					do{	//	choose s || r
						choice = prompt("Search (s) for a weapon or run (r) back into the house?");
					}while(choice!='s' || choice!='r');
					
					//	set the reaction
					if(choice=='s'){
						alert("You scan the yard...\nYou find a shovel!");
						
						//	Equip shovel (hands) & update stats:
						fHands = setGear("Shovel","Weapon","Hands",0,0,0,2,20,40,75,0,0,0,0,0,0);
						player = updatePlayer(player,fHands,cHands);
						pHands = cHands;
						cHands = fHands;
						equip = setEquip(equip.head,equip.chest,equip.back,cHands.name,equip.feet,equip.held);
						
						alert("The ghoulish man attacks!");
						foe = setFoe("Ghoulish",100,5,30,15);
						//	attack here
						
					}else if(choice=='r'){
					
					}
				}
				
			}else if(choice=='p'){	//	Prepare (p)
			
				do{	//	choose e || c - search livingroom
					choice = prompt("You decide to search for supplies: Check the entertainment center (e) or the couch (c)?");
				}while(choice!='e' || choice!='c');
				
				//	set the reaction
				if(choice=='e'){
				
				}else if(choice=='c'){
				
				}
			}
			
		</script>
	</body>
</html>